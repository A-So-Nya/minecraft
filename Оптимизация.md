Майнкрафт, особенно с модами — очень требовательная к ресурсам ПК игра, анон. Если у тебя слабая печка, то ты скорее всего окажешься не доволен её производительностью. В этой статье специально для тебя были собраны все возможные рекомендации по оптимизации Minecraft, с которыми в кубач можно будет поиграть даже на некропк. Впрочем, пользуйся вдумчиво и аккуратно: некоторые из них могут оказать обратный эффект и лишь усугубить ситуацию.  

---

## Оптимизация аргументов запуска

Аргументы запуска (_**JVM флаги**_) — отличный способ облегчить жизнь твоему сборщику мусора и в целом начать использовать ресурсы комьютера более эффективно. Учти, что некоторым флагам может понадобиться полная версия джавы, т. е. **JDK** или **серверная** версия JRE. Скачать можно открытый вариант _[`тут`](https://adoptopenjdk.net/)_ или закрытый от Oracle [`тут`](https://www.oracle.com/java/technologies/javase-server-jre8-downloads.html). **На сайте Oracle требуется регистрация для скачивания**!
> Статья, в которой рассказывается об оптимизации сборщика мусора **G1GC** (_Aikar's arguments_): _[`клик`](https://aikar.co/2018/07/02/tuning-the-jvm-g1gc-garbage-collector-flags-for-minecraft/)_  
_**TIP:** По моему опыту, больше подходит для сервера, нежели для клиента._  

> Ещё одна полезная статья с аргументами, но в этот раз для оптимизации клиента: _[`оригинал`](https://cwelth.com/manuals.php?mid=2)_,  [`гуглодоки`](https://docs.google.com/document/d/1Y9bijAyuXMlbCs9ttR5X1DOGzK-yq353zS70X01M9hY/edit?usp=sharing), [`пастбин`](https://pastebin.com/VX5K9NW7), [`гист`](https://gist.github.com/nightloli/36a6ac3558449452b121db030c86ee27).

> Другая неплохая статья про JVM флаги, на этот раз на [`хабрахабре`](https://habr.com/ru/post/160049/).

Флаги, скорее всего, заслуженно, не описанные в статьях выше:
|Флаг|Описание|
|---|---|
|**-Dforge.forceNoStencil=true**|[Источник](https://www.reddit.com/r/feedthebeast/comments/2g6c13/ways_to_optimize_performance_for_1710_packs/ckg5c1k/), скорее всего, применимо только для 1.7.10.|
|**-XX:+UseStringDeduplication**|Сборщик мусора будет пытаться экономить память, уничтожая повторяющиеся строки.|
|**-XX:-DontCompileHugeMethods**|Отключает лимит джавы на длинну методов, которые она может скомпилировать.|
|**-server**|Тот флаг, для которого тебе точно понадобится серверная версия джавы или JDK, анон! Виртуальная машина джавы будет использовать больше оптимизаций при компиляции байткода в обмен на дольшее время для 'разогрева'.|
|**-Dorg.lwjgl.util.NoChecks=True**|Отключает state tracking и дополнительные проверки во время игры.|
|**-XX:UseSSE=X**|Где X, подставь последнюю версию SSE, которую поддерживает твой процессор, анон! Узнать её можно с помощью [CPU-Z](https://www.cpuid.com/softwares/cpu-z.html) на Windows или ```cat /proc/cpuinfo \| grep -i sse``` на Linux.|

## Оптимизация с помощью модов

С помощью модификаций можно добавлять не только килотонны нового контента, но и заставлять игру работать быстрее.  

---
### Оптимизация новейшей версии

| Мод | Описание |
|---|---|
|[OptiFine](https://optifine.net/downloads)|Расширенные настройки графики, больше возможностей как к оптимизации, так и к красивостям.|
|[Phosphor](https://www.curseforge.com/minecraft/mc-mods/phosphor)|Оптимизации движка, отвечающего за свет.|
|[Lithium](https://www.curseforge.com/minecraft/mc-mods/lithium)|Оптимизации всего, до чего дотянулся автор.|
|[Sodium](https://github.com/jellysquid3/sodium-fabric)|На момент написания гайда мод находится в состоянии альфы и автор не выкладывает готовые билды. Он указан здесь заранее или для тех, кто хочет сам его скомпилировать себе, в конце концов, это несложно.|
|[OptiFabric](https://www.curseforge.com/minecraft/mc-mods/optifabric)|Требуется в дополнение к самому оптифайну для версий с фабриком.|
|[FastFurnace](https://www.curseforge.com/minecraft/mc-mods/fast-furnace-for-fabric) и [FastWorkbench](https://www.curseforge.com/minecraft/mc-mods/fastbench-for-fabric)|Печка и верстак будут кешировать последний использованный рецепт, что сэкономит капельку TPS на очень крупных базах или (в первую очередь) серверах.|
> **TIP:** В новейших версиях (1.14+) появился новый мод-лоадер: `Fabric`. Он смог составить конкуренцию всем привычному Forge, что является показателем и огромным достижением, и к фабрику уже тоже имеются оптимизационные моды.  

---

### Оптимизация 1.12.2
|Мод|Описание|
|---|---|
|[OptiFine](https://optifine.net/downloads)|Расширенные настройки графики, больше возможностей как к оптимизации, так и к красивостям.|
|[FoamFix](https://www.curseforge.com/minecraft/mc-mods/foamfix-optimization-mod)|Крайне рекоммендуется для использования, объединяет одинаковые модели, экономя этим тонны памяти, позволяет отключать анимации у текстур (по-умолчанию отключено), имеет множество других полезных оптимизаций.|
|[AI Improvements](https://www.curseforge.com/minecraft/mc-mods/ai-improvements)|Оптимизирует искуственный интелект мобов, опционально отключает его неважные для игры части.|
|[Surge](https://www.curseforge.com/minecraft/mc-mods/surge)|Мелкие оптимизации и один багфикс.|
|[Multithreaded Noise](https://www.curseforge.com/minecraft/mc-mods/multithreaded-noise)|Заменяет способ создания шума для генерации мира более эффективным на системах с несколькими ядрами.|
|[Performant](https://www.curseforge.com/minecraft/mc-mods/performant)|Различные оптимизации, связанные с entities, распараллериваниями и прочими сложными штуками. В прошлом были проблемы с частью модов (Vampirism, Rats), сейчас должно было стать лучше.|
|[Unloader](https://www.curseforge.com/minecraft/mc-mods/unloader)|Более агрессивно, чем фордж, выгружает неиспользуемые измерения, спасая этим от утечек памяти.|
|[TexFix](https://www.curseforge.com/minecraft/mc-mods/texfix)|Экономит память при исопльзовании крупных текстур паков.|
|[Phosphor](https://www.curseforge.com/minecraft/mc-mods/phosphor-forge)|Оптимизации движка, отвечающего за свет.|
|[BetterFps](https://www.curseforge.com/minecraft/mc-mods/betterfps)|Функционал по большей части повторяет оптифайн, но имеется выбор, каким именно образом оптимизировать sin() и cos() функции.|
|[VanillaFix](https://www.curseforge.com/minecraft/mc-mods/vanillafix)|Исправляет баги, добавляет оптимизаций, позволяет майнкрафту восстанавливаться после крашей. Musthave!|
|[Chunk-Pregenerator](https://www.curseforge.com/minecraft/mc-mods/chunkpregenerator)|Позволяет заранее генерировать мир, чем спасает от лагов во время путешествий в новые места по миру, имеет няшную гуишку для этой прегенерации, умеет в ретроген! А ещё у них самая быстрая прегенерация, благодаря отключенным проверкам!|
|[Clumps](https://www.curseforge.com/minecraft/mc-mods/clumps)|Объединяет много шариков опыта в один, чем чуть спасает от лагов. Требует [B.A.S.E](https://www.curseforge.com/minecraft/mc-mods/base).|
|[FastFurnace](https://www.curseforge.com/minecraft/mc-mods/fastfurnace) и [FastWorkbench](https://www.curseforge.com/minecraft/mc-mods/fastworkbench)|Печка и верстак будут кешировать последний использованный рецепт, что сэкономит капельку TPS на очень крупных базах или (в первую очередь) серверах.|

---

### Оптимизация 1.7.10
|Мод|Описание|
|---|---|
|[OptiFine](https://optifine.net/downloads)|Расширенные настройки графики, больше возможностей как к оптимизации, так и к красивостям.|
|[BetterFps](https://www.curseforge.com/minecraft/mc-mods/betterfps)|Функционал по большей части повторяет оптифайн, но имеется выбор, каким именно образом оптимизировать sin() и cos() функции.|
|[Chunk-Pregenerator](https://www.curseforge.com/minecraft/mc-mods/chunkpregenerator)|Позволяет заранее генерировать мир, чем спасает от лагов во время путешествий в новые места по миру, имеет няшную гуишку для этой прегенерации, умеет в ретроген! А ещё у них самая быстрая прегенерация, благодаря отключенным проверкам!|
|[FastCraft](https://www.curseforge.com/minecraft/mc-mods/fastcraft)|Много разных ощутимых оптимизаций. Если используете optifine, выбирайте последнюю версию. Если нет, то 1.24.|

> **TIP:** Некоторые моды имеют возможность отключить особо тяжёлый функционал, и снизив тем самым нагрузку на ПК.  Например, Lycanites Mobs в general config'е имеют опции Disable Model Alpha и Model Multipass, которые, в обмен на чуть большую уродливость ликанитов, облегчат жизнь твоему ПК, анон, убрав лишний рендер моделек ликанитов и альфа канал! Также Twilight Forest имеет в конфиге специальную секцию Perfomance, в которой можно отключить звёздный свет и увеличить фпс в Twilight Glacier, поменяв обычный лёд на packed. Такое есть во многих модах, читай конфиги, анон!

## Прочие оптимизации

### **Обновление библиотек для старых версий**

Если ты играешь в версию майнкрафта ниже 1.12.2, у тебя могут быть недостаточно новые версии библиотек. В новых, как правило, лучше производительность, поэтому имеет смысл обновить их.

Скачайте майнкрафт версии 1.12.2 и замените файлами из директорий minecraft/libraries/org/lwjgl/lwjgl .minecraft/libraries/java3d/vecmath и .minecraft/versions/Forge 1.12.2/natives такие же файлы в более старой версии. Именно замените новыми файлами старые, используя такое же название!
(для редакторов: способ весьма странный, разве что для форджа выглядит логично. Разве не все версии используют одинаковые библиотеки?

От редактора: они используют одинаковые библиотеки, но до какой-то версии можангам было очень лень версии этих библиотек обновлять.
Если кто-то хочет, может сам эти vecmath'ы и lwjgl'ы погуглить и скачать с сайтов.
Ещё мб это проблема именно HMCL'а, но у меня вроде сайт можангов на источнике скачивания стоял.)

### **Отключение логов**

Если ты — счастливый обладатель медленного HDD в 2020 году, то может помочь отключение логгирования в майнкрафте. Для этого допишите в комманду запуска **`-Dlog4j.configurationFile=log4j2.xml`** создайте в корне с игрой файл **`log4j2.xml`** со следующим содержанием:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="ERROR" packages="com.mojang.util">
    <Loggers>
        <Root level="OFF" additivity="false">
        </Root>
    </Loggers>
</Configuration>
```

### **Ram-диск**

Если у тебя ещё остаётся оперативная память, после запуска майнкрафта, ты можешь перенести мир на ram-диск. Также я слышал слух, про то, что имеет смысл перенести JVM на рамдиск и пользуюсь этим советом, но доказательств пользы у меня нет. (для редакторов: возможно это может принести больше вреда, чем пользы, ведь во время загрузки новых чанков оперативы будет становиться всё меньше и меньше, и рано или поздно выкинет OutOfMemoryException. ВОЗМОЖНО.)

> **TIP:** Не пользуйтесь фичей, если собираетесь прегенерировать чанки! Оперативная память закончится моментально. Сейв, с оверворлдом, прогруженным на радиус ~300 чанков, запросто съедает больше гигабайта места!

В Linux используется tmpfs и автобекап. [Этот гайд](https://wiki.archlinux.org/index.php/Improving_performance#Relocate_files_to_tmpfs) хоть и находится на вики арча, но подойдёт для 99% линуксов.

Для Windows есть [огромный зоопарк](https://en.wikipedia.org/wiki/List_of_RAM_drive_software#Microsoft_Windows) какого-то софта для рамдисков, тот, кто сейчас это пишет, не может ничего порекомендовать из него.
