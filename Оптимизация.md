Майнкрафт, особенно с модами — далеко на самая лёгкая игра, анон. Поэтому, попробовав игру, ты можешь оказаться не доволен её производительностью. В этой статье специально для тебя были собраны все возможные рекомендации по оптимизации Minecraft. Впрочем, пользуйся вдумчиво и аккуратно: некоторые из них могут оказать обратный эффект и лишь усугубить ситуацию.  

---

## Оптимизация аргументов запуска

Аргументы запуска (_**JVM флаги**_) — отличный способ облегчить жизнь твоему сборщику мусора и в целом начать использовать ресурсы комьютера более эффективно. Учти, что некоторым флагам может понадобиться полная версия джавы, т. е. **JDK** или **серверная** версия JRE. Скачать можно открытый вариант _[`тут`](https://adoptopenjdk.net/)_ или закрытый от Oracle [`тут`](https://www.oracle.com/java/technologies/javase-server-jre8-downloads.html). **На сайте Oracle требуется регистрация для скачивания**!
> Статья, в которой рассказывается об оптимизации сборщика мусора **G1GC** (_Aikar's arguments_): _[`клик`](https://aikar.co/2018/07/02/tuning-the-jvm-g1gc-garbage-collector-flags-for-minecraft/)_  
_**(!)** По моему опыту, больше подходит для сервера, нежели для клиента._  

> Ещё одна полезная статья с аргументами, но в этот раз для оптимизации клиента: _[`оригинал`](https://cwelth.com/manuals.php?mid=2)_,  [`гуглодоки`](https://docs.google.com/document/d/1Y9bijAyuXMlbCs9ttR5X1DOGzK-yq353zS70X01M9hY/edit?usp=sharing), [`пастбин`](https://pastebin.com/VX5K9NW7).
(для редакторов: надо бы спасти эту статейку с мёртвого сайта, сохранить где-нибудь. скажем, на гугл-доках. займитесь этим, кому не лень.)

Флаги, скорее всего, заслуженно, не описанные в статьях выше:

Для 1.7.10 **-Dforge.forceNoStencil=true** — [Источник](https://www.reddit.com/r/feedthebeast/comments/2g6c13/ways_to_optimize_performance_for_1710_packs/ckg5c1k/)

**-XX:+UseStringDeduplication** — сборщик мусора будет пытаться экономить память, уничтожая повторяющиеся строки

**-XX:-DontCompileHugeMethods** — отключает лимит джавы на длинну методов, которые она может скомпилировать

**-server** — тот флаг, для которого тебе точно понадобится серверная версия джавы или JDK, анон! Виртуальная машина джавы будет использовать больше оптимизаций при компиляции байткода в обмен на дольшее время для 'разогрева'. 


## Оптимизация с помощью модов

_**Моды для оптимизации по версиям**_

_**Читайте конфиги модов! В описанных ниже модах часто есть функции, которые могут прибавить FPS/TPS, но отключены по умолчанию! Также и в обычных модах бывают опции для некропека, которые сделают жизнь твоей пеки чуть легче, анон!**_

**Все, кроме, первое время после выхода, самой последней версии**

[**Optifine**](https://optifine.net/downloads) — расширенные настройки графики, поддержка шейдеров. Можно выкрутить на минимум, чтобы не лагало, можно наоборот

Для того, чтобы завести Optifine на фабрике также в **дополнение** к предыдущему, понадобится [этот](https://www.curseforge.com/minecraft/mc-mods/optifabric) мод

**1.12.2**:

[**FoamFix**](https://www.curseforge.com/minecraft/mc-mods/foamfix-optimization-mod) — крайне рекоммендуется для использования, объединяет одинаковые модели, экономя память, позволяет отключать анимации у текстур (по-умолчанию отключено), имеет множество других полезных оптимизаций.

[**AI Improvements**](https://www.curseforge.com/minecraft/mc-mods/ai-improvements) — оптимизирует искуственный интелект мобов. Опционально отключает неважные для игры части AI.

[**Surge**](https://www.curseforge.com/minecraft/mc-mods/surge) — мелкие оптимизации и один багфикс.

[**FastWorkbench**](https://www.curseforge.com/minecraft/mc-mods/fastworkbench) и [**FastFurnace**](https://www.curseforge.com/minecraft/mc-mods/fastfurnace) — оба слабо ощутимы не на больших серверах, но могут быть без проблем использованы.

[**Multithreaded Noise**](https://www.curseforge.com/minecraft/mc-mods/multithreaded-noise) — распараллеривает создание шума для генерации мира.

[**Performant**](https://www.curseforge.com/minecraft/mc-mods/performant) — различные крупные оптимизации. В прошлом были проблемы с частью модов (Vampirism, Rats), сейчас, возможно, стало лучше.

[**Unloader**](https://www.curseforge.com/minecraft/mc-mods/unloader) — выгружает неиспользуемые измерения, спасает этим от утечек памяти.

[**TexFix**](https://www.curseforge.com/minecraft/mc-mods/texfix) — экономит память при использовании крупных текстурпаков.

[**Phosphor**](https://www.curseforge.com/minecraft/mc-mods/phosphor-forge) — оптимизации движка, отвечающего за свет.

[**BetterFps**](https://www.curseforge.com/minecraft/mc-mods/betterfps) — использует более быстрые sin() и cos() инструкции, имеет некоторые другие опции.

[**VanillaFix**](https://www.curseforge.com/minecraft/mc-mods/vanillafix) — исправляет баги, добавляет оптимизаций, позволяет майнкрафту восстанавливаться после крашей. Musthave!

[**Chunk-Pregenerator**](https://www.curseforge.com/minecraft/mc-mods/chunkpregenerator) — позволяет заранее генерировать мир, чем спасает от лагов во время путешествий в новые места по миру, оптимизации этой самой генерации

[**Clumps**](https://www.curseforge.com/minecraft/mc-mods/clumps) — объединяет entity xp в один, требует [**B.A.S.E**](https://www.curseforge.com/minecraft/mc-mods/base)

**1.7.10**

[**BetterFps**](https://www.curseforge.com/minecraft/mc-mods/betterfps) — использует более быстрые sin() и cos() инструкции, имеет некоторые другие опции.

[**Fastcraft**](https://www.curseforge.com/minecraft/mc-mods/fastcraft) — много разных оптимизаций. Если используете optifine, выбирайте последнюю версию. Если нет, то 1.24

**Версии с Фабриком и ванилла, на которую рекомендуется поставить фабрик и приведённые ниже моды, даже если вы не планировали использовать играть с модами**

[**Phosphor**](https://www.curseforge.com/minecraft/mc-mods/phosphor) — оптимизации движка, отвечающего за свет.

[**Lithium**](https://www.curseforge.com/minecraft/mc-mods/lithium) — оптимизации всего, до чего дотянулся автор

[**Sodium**](https://github.com/jellysquid3/sodium-fabric) — от автора двух приведённых выше модов, требуется компилировать самому.

[**FastWorkbench**](https://www.curseforge.com/minecraft/mc-mods/fast-furnace-for-fabric) и [**FastFurnace**]( https://www.curseforge.com/minecraft/mc-mods/fastbench-for-fabric) — оба слабо ощутимы не на больших серверах, но могут быть без проблем использованы.

**Обновление библиотек старых версий**

Если вы играете в версию майнкрафта до 1.12.2, у вас могут быть недостаточно новые версии библиотек. В новых, как правило, лучше производительность, поэтому имеет смысл обновить их.

Скачайте майнкрафт версии 1.12.2 и замените файлами из директорий minecraft/libraries/org/lwjgl/lwjgl .minecraft/libraries/java3d/vecmath и .minecraft/versions/Forge 1.12.2/natives такие же файлы в более старой версии. Именно замените новыми файлами старые, используя такое же название!

**Отключение логов**

Если у вас медленный HDD, то может помочь отключение логгирования в майнкрафте. Для этого допишите в комманду запуска -Dlog4j.configurationFile=log4j2.xml и создайте в корне с игрой файл log4j2.xml со следующим содержанием:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="ERROR" packages="com.mojang.util">
    <Loggers>
        <Root level="OFF" additivity="false">
        </Root>
    </Loggers>
</Configuration>
```

**Ram-диск**

Если у вас ещё остаётся оперативная память, после запуска майнкрафта, вы можете перенести мир на ram-диск. Также я слышал слух, про то, что имеет смысл перенести JVM на рамдиск и пользуюсь этим советом, но доказательств пользы у меня нет.

**Не рекоммендуется использовать вместе с прегенерацией мира, если у вас мало оперативной памяти! Сейв, с оверворлдом, прогруженным на радиус ~300 чанков запросто съедает больше гигабайта места!**

В Linux используется tmpfs и автобекап. [Этот гайд](https://wiki.archlinux.org/index.php/Improving_performance#Relocate_files_to_tmpfs) хоть и находится на вики арча, но подойдёт для 99% линуксов.

Для Windows есть [огромный зоопарк](https://en.wikipedia.org/wiki/List_of_RAM_drive_software#Microsoft_Windows) какого-то софта для рамдисков, тот, кто сейчас это пишет, не может вам ничего порекомендовать из него.
